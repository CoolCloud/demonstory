define("mod/ajax",["jquery","mod/cookie"],function(c,a){function b(){var e=arguments,d=e[e.length-1]||{};if(d.arkWithDocReferer){a("prev_referer",document.referrer,{path:"/","max-age":2})}if(d.type&&d.type.toUpperCase()!=="GET"){d.data=c.extend({},d.data,{ck:a("ck")})}if(a("profile")){var f=null;c.each(d,function(g,h){if(g==="dataFilter"){f=h;delete e[g]}});d=c.extend(d,{dataFilter:function(h,g){try{h=c.parseJSON(h)}catch(i){h=h}require("widget/profile",function(j){j=j||Ark.profile;j.add({time:h.pt,uri:h.uri,type:d.type,stdout:h.profile})});return f===null?h.rawData:f(h.rawData)}})}return c.ajax.apply(c,e)}b.post=function(e,f,g,d){if(c.isFunction(f)){d=d||g;g=f;f=undefined}return b(e,{type:"POST",data:f,success:g,dataType:d||"json"})};b.get=function(e,f,d){return b(e,{type:"GET",success:f,dataType:d||"json"})};b.methodMap={read:"GET",create:"POST",update:"PUT","delete":"DELETE"};b.request=function(h,f,g,e,d){if(c.isFunction(g)){d=e;e=g;g={}}return b(f,c.extend({type:h,data:g,dataType:d||"text"},e))};return b});