Do("mod/ajax","ui/alert",function(){window.Ark=window.Ark||{};Ark.UnarchiveWidget=a;var b="unarchiveWidget";function a(c){this._el=c;this._ajax=Ark.ajax;this._button=this._el.find("[data-action=unarchive]");this.bindButton(this._button)}$.extend(a.prototype,{bindButton:function(d){var c=this;d.on("click",function(f){c.unarchive()})},unarchive:function(){this._sendRequest().done($.proxy(this,"renderAsBought")).fail($.proxy(this,"showFailureAlert"))},_sendRequest:function(){return this._ajax({type:"POST",url:this.getHref(),dataType:"json"})},getHref:function(){return this._button.data("href")},renderAsBought:function(){var c=this._el;c.empty().append($("<span />",{"class":"price-tag",text:"已购买"})).append($("<a />",{"class":"btn btn-read",href:"/reader/ebook/"+c.data("article-id")+"/",text:"阅读",target:"_blank"}))},showFailureAlert:function(){Ark.alert({timeout:3000,title:"出错了",content:"无法重新加入阅读列表，也许是网络连接出现了问题。p"})}});a.applyWithIn=function(c,d){$(d).find(c).each(function(e,f){f=$(f);var g=f.data(b);if(!g){g=new a(f);f.data(b,g)}})}});